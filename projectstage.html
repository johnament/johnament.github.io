<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="deltaspike-generate-pages">
<meta name="author" content="chm">
<!-- No caching headers -->
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="expires" content="-1" />

<title>DeltaSpike ProjectStage</title>

<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->

<!-- Styles -->

<link href="https://deltaspike.apache.org/resources/css/bootstrap.css" rel="stylesheet">
<link href="https://deltaspike.apache.org/resources/css/bootstrap-responsive.css" rel="stylesheet">
<link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.1.0/css/font-awesome.min.css" rel="stylesheet" >

<style type="text/css">
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}

body {
  padding-top: 60px;
  padding-bottom: 40px;
}
</style>

<script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36103647-1']);
    _gaq.push(['_trackPageview']);

    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
</head>

<body>

  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse"
          data-target=".nav-collapse"> <span class="icon-bar"></span> <span
          class="icon-bar"></span> <span class="icon-bar"></span>
        </a>
        <a class="brand logocolor" href="../index.html">Apache DeltaSpike</a>
        <div class="nav-collapse">
          <ul class="nav">
            <li class="active"><a href="../index.html">Home</a></li>
            <li><a href="../documentation">Documentation</a></li>
            <li><a href="../javadoc.html">Javadoc</a></li>
            <li><a href="../documentation/source.html">Source</a></li>
            <li><a href="../download.html">Download</a></li>
            <li><a href="../community.html">Community</a></li>
            <!-- <li><a href="./support.html">Support</a></li>  -->
            <li><a href="../news.html">News</a></li>
            <li><a href="../migration-guide.html">Migration</a></li>
          </ul>
        </div>
        <!--/.nav-collapse -->
        <form id="search-form" action="http://www.google.com/search"
          method="get" class="navbar-search pull-right">
          <input value="deltaspike.apache.org" name="sitesearch"
            type="hidden"> <input class="search-query" name="q"
            id="query" type="text">
        </form>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="span12">
        <div class="page-title">
          <h1>DeltaSpike ProjectStage</h1>
        </div>

        <div id="toc" class="toc">
            <ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_custom_project_stages">Custom Project Stages</a></li>
<li><a href="#_setting_the_active_projectstage">Setting the active ProjectStage</a></li>
<li><a href="#_projectstageproducer_for_third_party_portable_extensions">ProjectStageProducer (for Third-party Portable Extensions)</a></li>
</ul>
            <hr>
            <div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Project stages allow to use implementations depending on the current
environment. For example, you can implement a bean which creates sample-data for
system tests which gets activated only in case of ProjectStage
<code>SystemTest</code>.</p>
</div>
<div class="paragraph">
<p><em>Besides custom ProjectStages</em> it is possible to use the following
pre-defined ProjectStages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>UnitTest</p>
</li>
<li>
<p>Development</p>
</li>
<li>
<p>SystemTest</p>
</li>
<li>
<p>IntegrationTest</p>
</li>
<li>
<p>Staging</p>
</li>
<li>
<p>Production</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The core provides a pluggable and type-safe approach for using project
stages in a project (it is also used within the framework). Furthermore,
<code>@Exclude</code> allows use of, for example, implementations annotated with
<code>javax.enterprise.inject.Alternative</code> for specific ProjectStages.
Besides the out-of-the-box ProjectStages it is possible to implement
<em>custom but type-safe</em> ProjectStages which will be exposed by
DeltaSpike.</p>
</div>
<div class="paragraph">
<p>Resolving and using the ProjectStage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Inject</span>
<span class="directive">private</span> ProjectStage projectStage;

<span class="comment">//...</span>

<span class="type">boolean</span> isDevProjectStage = ProjectStage.Development.equals(<span class="local-variable">this</span>.projectStage);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_project_stages">Custom Project Stages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is possible to provide custom project stage implementations.
Therefore, you have to provide an implementation of the
<code>ProjectStageHolder</code> interface. In this class you nest the custom
ProjectStage implementations which have to be
<code>public static final class</code> and it is required to extend <code>ProjectStage</code>.
It is required to provide a <code>public static final</code> instance even though,
you will not use it directly.</p>
</div>
<div class="paragraph">
<p>ProjectStageHolder for custom project stage implementations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">CustomProjectStageHolder</span> <span class="directive">implements</span> ProjectStageHolder
{
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="type">class</span> <span class="class">CustomProjectStage</span> <span class="directive">extends</span> ProjectStage
    {
        <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="type">long</span> serialVersionUID = <span class="integer">1029094387976167179L</span>;
    }

    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> CustomProjectStage CustomProjectStage = <span class="keyword">new</span> CustomProjectStage();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configure your custom <code>ProjectStageHolder</code> in
<code>META-INF/services/org.apache.deltaspike.core.api.projectstage.ProjectStageHolder</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The file has to provide the <em>fully qualified</em> class name of the custom
implementation of the <code>ProjectStageHolder</code> interface.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Usage of a custom project stage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ProjectStage customProjectStage;
customProjectStage = ProjectStage.valueOf(<span class="string"><span class="delimiter">&quot;</span><span class="content">CustomProjectStage</span><span class="delimiter">&quot;</span></span>);
<span class="comment">//or</span>
customProjectStage = CustomProjectStageHolder.CustomProjectStage;
<span class="comment">//or</span>
<span class="annotation">@Exclude</span>(ifProjectStage = CustomProjectStageHolder.CustomProjectStage.class)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_the_active_projectstage">Setting the active ProjectStage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For setting the ProjectStage which shall get used in your application
you can specify it in a few ways. The underlying mechanism used to
determine the string is the ConfigResolver.</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre>-Dorg.apache.deltaspike.ProjectStage=Development</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_projectstageproducer_for_third_party_portable_extensions">ProjectStageProducer (for Third-party Portable Extensions)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>ProjectStageProducer</code> provides the producer method which allows to
inject the current ProjectStage. However, in some cases it is needed to
use ProjectStages also during the bootstrapping process of the CDI
container and you cais not use injection. In such cases you can use
<code>ProjectStageProducer.getInstance().getProjectStage()</code> to resolve the
current ProjectStage. This helper also contains helpers for unit-tests
- e.g. <code>#setProjectStage</code>. However, those methods shouldis not be needed
for users (we just need them for testing different ProjectStage
scenarios).</p>
</div>
</div>
</div>
        </div>

        <hr>

        <footer>
          <p>Copyright © 2011-2014 The Apache Software Foundation,
            Licensed under the Apache License, Version 2.0.</p>
          <p>Apache and the Apache feather logo are trademarks of The Apache Software Foundation.</p>
        </footer>
      </div>
    </div>
  </div>
</body>
</html>